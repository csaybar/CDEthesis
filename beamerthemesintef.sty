% Template for CDE presentations with LaTeX beamer.
%
% by Cesar Aybar, csaybar@gmail.com 
% Derived (through several iterations) from Federico 
% Zenith, federico.zenith@sintef.no.
% beamerthementnu class.
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.

\ProvidesPackage{beamerthemesintef}[2022/03/20]

\RequirePackage{etoolbox}
\RequirePackage{tikz}

% Force 13:9 aspect ratio
\RequirePackage{geometry}
\geometry{paperwidth=13cm,paperheight=9cm}

% Caladea is a Cambria clone, Carlito a Calibri clone
\RequirePackage{caladea,carlito}
\renewcommand{\familydefault}{\sfdefault}

\RequirePackage{graphicx,sintefcolor}

% No navigation symbols
\setbeamertemplate{navigation symbols}{}

\newcommand{\@footlinepayoff}{\@SINTEFmotto}
\setbeamertemplate{footline}{%
  \begin{beamercolorbox}[wd=\textwidth,ht=5mm,dp=3mm,rightskip=1cm]{footline}
  \usebeamerfont{footline}\hfill\@footlinepayoff
  \end{beamercolorbox}
}

% Set footline AND coordinate blocks with it
\newcommand{\footlinecolor}[1]{% if #1 is empty, makes footline transparent
  \ifstrempty{#1}{%
    \renewcommand{\@footlinepayoff}{}
    \setbeamercolor{footline}{bg=}
    \setbeamercolor{block title}{fg=white,bg=sintefblue}
    \setbeamercolor{block body}{fg=white,bg=sintefblue}
  }{
    \renewcommand{\@footlinepayoff}{\@SINTEFmotto}
    \setbeamercolor{footline}{fg=white,bg=#1}
    \setbeamercolor{block title}{fg=white,bg=#1}
    \setbeamercolor{block body}{fg=white,bg=#1}
  }%
}
\footlinecolor{} % Default: no footline

\pgfdeclareimage[width=0.09\paperwidth]{bluelogo}{images/cloudsen12_logo_blue.png}
\pgfdeclareimage[width=0.09\paperwidth]{whitelogo}{images/cloudsen12_logo.png}
\newcommand{\@SINTEFlogo}{bluelogo}

% Set colours
% NOTE! Beamer colors should be set in the preamble. It often works fine in the 
%       document itself, but NOT for normal text foreground.
%       \themecolor should only be called from the preamble.
\newcommand{\themecolor}[1]{
	\ifstrequal{#1}{blue}{%
		\setbeamercolor{normal text}{fg=white,bg=sintefblue}
		\setbeamercolor{structure}{fg=white}
		\renewcommand{\@SINTEFlogo}{whitelogo}
		\setbeamercolor{block title}{fg=sintefblue,bg=sintefgrey}
		\setbeamercolor{block body}{fg=sintefblue,bg=sintefgrey}
	}{%
		\setbeamercolor{normal text}{fg=black,bg=white}
		\setbeamercolor{structure}{fg=sintefblue}
		\renewcommand{\@SINTEFlogo}{bluelogo}
		\setbeamercolor{block title}{fg=white,bg=sintefblue}
		\setbeamercolor{block body}{fg=white,bg=sintefblue}
	}
}
\themecolor{white} % Default: white theme


\setbeamercolor{structure}{fg=colorA,bg=colorB}
\setbeamercolor{title}{fg=white,bg=colorA}
\setbeamercolor{alerted text}{fg=sintefred}
\setbeamercolor{author}{fg=black}
\setbeamercolor{date}{fg=black}

\setbeamerfont{author}{size=\large}
\setbeamerfont{date}{size=\tiny}
\setbeamerfont{title}{series=\bfseries}
\setbeamerfont{subtitle}{series=\mdseries,size=\large}
\setbeamerfont{frametitle}{series=\bfseries}
\setbeamerfont{framesubtitle}{series=\mdseries}
\setbeamerfont{footline}{size=\scriptsize}
\setbeamerfont{block title}{series=\centering\bfseries}

% Code to get prettier boxes
\setbeamertemplate{blocks}[rounded]

% Bullets in several levels
\setbeamertemplate{itemize item}{\textbullet}
\setbeamertemplate{itemize subitem}{\textemdash}
\setbeamertemplate{itemize subsubitem}{\ensuremath{\circ}}

\newenvironment{colorblock}[3][white]{%
	\begingroup
	\setbeamercolor{block title}{fg=#1,bg=#2}
	\setbeamercolor{block body} {fg=#1,bg=#2}
	\begin{block}{#3}
	}{%
	\end{block}
	\endgroup
}
